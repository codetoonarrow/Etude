<div class="container">
  <div class="row">
    <div class="col s2">Day</div>
    <div class="col s4">Start Time</div>
    <div class="col s4">End Time</div>
  </div>

<% (0..6).to_a.each do |d| %>
  <div class="row">
    <% if @teacher.availability_ranges.find_by(weekday: d) %>
    <% t = @teacher.availability_ranges.find_by(weekday: d) %>
      <div class="col s2"><%= "#{t.weekday_name}" %></div>
      <div class="col s4"><%= "#{t.start_time_to_12h}" %></div>
      <div class="col s4"><%= "#{t.end_time_to_12h}" %></div>
        <% if current_user && current_user.id == @teacher.user_id %>
          <div class="col s2"><button class="btn waves-effect waves-light"><%= link_to "Edit", edit_availability_range_path(t.id) %></button>
            <button class="btn waves-effect waves-light"><%= link_to "Delete", availability_range_path(t.id), method: :delete, data: {confirm: "Are you sure you want to delete?"}%></button>
          </div>
        <% end %>
    <% else %>
      <% if current_user && current_user.id == @teacher.user_id %>
      <% @availability_range = AvailabilityRange.new %>
      <%= form_for @availability_range do |f| %>
        <div class="col s2"><%= "#{Date::DAYNAMES[d]}" %> <%= f.hidden_field(:weekday, value: d)%></div>
        <div class="col s4"><%= f.select(:start_time, AvailabilityRange::HOURS_OF_DAY) %></div>
        <div class="col s4"><%= f.select(:end_time, AvailabilityRange::HOURS_OF_DAY) %></div>
        <div class="col s2"><span class="actions"><%= f.submit "Add #{Date::DAYNAMES[d]} ", class: "btn waves-effect waves-light"%></span></div>
        <% end %>
      <% end %>
    <% end %>
  </div>
<% end %>

</div>
